#!/bin/bash

nsname=$1
mparams=$2
nsamps=$3
conflvl=$4
outdir=$5

echo $nsname > "$outdir/${nsname}_nonrotparams.in"
echo $mparams >> "$outdir/${nsname}_nonrotparams.in"
echo $nsamps >> "$outdir/${nsname}_nonrotparams.in"
echo $conflvl >> "$outdir/${nsname}_nonrotparams.in"
echo $outdir >> "$outdir/${nsname}_nonrotparams.in"

inferprops $nsname -v -p R,C,I,Lambda -D genbetaprime,truncated -P 1.+0.934305+2.85628+191.509,$mparams -n $nsamps -o $outdir/ -t _nonrotprops

plothist "${nsname}_nonrotprops.csv" -x R -t R -b 100 -d $outdir/ -o $outdir/ -f post_ -A "\$R\$ [km]",""
plothist "${nsname}_nonrotprops.csv" -x C -t C -b 100 -d $outdir/ -o $outdir/ -f post_ -A "\$C\$",""
plothist "${nsname}_nonrotprops.csv" -x I -t I -b 100 -d $outdir/ -o $outdir/ -f post_ -A "\$I\$ [10\$^{45}\$ g cm\$^2\$]",""
plothist "${nsname}_nonrotprops.csv" -x Lambda -t Lambda -b 100 -d $outdir/ -o $outdir/ -f post_ -A "\$\Lambda\$",""

plothist "${nsname}_nonrotprops.csv" -x M -t m -b 100 -d $outdir/ -o $outdir/ -f prior_ -A "\$m\$ [\$M_{\odot}\$]",""

calcintervals -v "${nsname}_nonrotprops.csv" -p M,R,C,I,Lambda -L $conflvl -d $outdir/ -o $outdir/ -t _nonrotCI
