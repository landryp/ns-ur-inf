#!/bin/bash

nsname=$1
nsmass=$2
nsmassstd=$3
nsmassub=$4
omega=$5
omegastd=$6
nsamps=$7
conflvl=$8
outdir=$9

echo $nsname > "$outdir/${nsname}_params.in"
echo $nsmass >> "$outdir/${nsname}_params.in"
echo $nsmassstd >> "$outdir/${nsname}_params.in"
echo $nsmassub >> "$outdir/${nsname}_params.in"
echo $omega >> "$outdir/${nsname}_params.in"
echo $omegastd >> "$outdir/${nsname}_params.in"
echo $nsamps >> "$outdir/${nsname}_params.in"
echo $conflvl >> "$outdir/${nsname}_params.in"
echo $outdir >> "$outdir/${nsname}_params.in"

inferprops $nsname -p I,chi -M $nsmass,$nsmassstd -L 2.85628,191.509 -b 1.,0.934305 -O $omega,$omegastd -n $nsamps -o $outdir/ -T $nsmassub

plothist "${nsname}_props.csv" -x I -t I -b 100 -d $outdir/ -o $outdir/ -f post_ -A "I [10\$^{45}\$ g cm\$^2\$]",""
plothist "${nsname}_props.csv" -x chi -t chi -b 100 -d $outdir/ -o $outdir/ -f post_ -A "\$\chi\$",""

calcintervals "${nsname}_props.csv" -p I,chi -L $conflvl -d $outdir/ -o $outdir/
